package dp;


/**
 * 〈一句话功能简述〉
 *
 * @author chenghu
 * @since 2025-08-14 23:09:19
 */
public class Lc2266 {
    String[] letterMapping = new String[] {
            "", "", "abc", "def", "ghi", "jkl", "mno", "pqrs", "tuv", "wxyz"
    };

    long[][] memo;

    long sum = 1;

    public int countTexts(String pressedKeys) {
        memo = new long[pressedKeys.length() + 1][10];
        char[] charArray = pressedKeys.toCharArray();
        // 有可能自己单独成 有可能和下一个组合一起成一个字母
        int index = 0;
        while (index < charArray.length) {
            char c = charArray[index];
            int j = index + 1;
            while (j < charArray.length && charArray[j] == c) {
                j++;
            }
            long ans = dfs(j - index, c);
            ans = ans % 1000000007;
            sum = sum * ans;
            sum = sum % 1000000007;
            index = j;
        }
        return (int) (sum % 1000000007);
    }

    public long dfs(int i, char c) {
        // 长度是3 数字是2
        String s = letterMapping[c - '0'];
        long ans = 0;
        if (i < 0) {
            return 0;
        }
        if (i == 0) {
            return 1;
        }
        if (memo[i][c - '0'] != 0) {
            return memo[i][c - '0'];
        }
        for (int j = 1; j <= s.length(); j++) {
            ans += dfs(i - j, c);
        }
        memo[i][c - '0'] = ans % 1000000007;
        return ans;
    }

    public static void main(String[] args) {
        Lc2266 lc2266 = new Lc2266();
        System.out.println("44444444444444444444444444444444" + ":" + lc2266.countTexts("44444444444444444444444444444444"));
        System.out.println("8888888888888888" + ":" + lc2266.countTexts("8888888888888888"));
        System.out.println("999999999999" + ":" + lc2266.countTexts("999999999999"));
        System.out.println("3333333333333333" + ":" + lc2266.countTexts("3333333333333333"));
        System.out.println("6666666666666666" + ":" + lc2266.countTexts("6666666666666666"));
        System.out.println("2222222222222222" + ":" + lc2266.countTexts("2222222222222222"));
        System.out.println("6666666666666666" + ":" + lc2266.countTexts("6666666666666666"));
        System.out.println("3333333333333333" + ":" + lc2266.countTexts("3333333333333333"));
        System.out.println("8888888888888888" + ":" + lc2266.countTexts("8888888888888888"));
        System.out.println("2222222222222222" + ":" + lc2266.countTexts("2222222222222222"));
        System.out.println("4444444444444444" + ":" + lc2266.countTexts("4444444444444444"));
        System.out.println("8888888888888" + ":" + lc2266.countTexts("8888888888888"));
        System.out.println("2222222222222222" + ":" + lc2266.countTexts("2222222222222222"));
        System.out.println("8888888888888" + ":" + lc2266.countTexts("8888888888888"));
        System.out.println("9999999999999999" + ":" + lc2266.countTexts("9999999999999999"));
        System.out.println("333333333" + ":" + lc2266.countTexts("333333333"));
        System.out.println("444444" + ":" + lc2266.countTexts("444444"));
        System.out.println("66" + ":" + lc2266.countTexts("66"));
        System.out.println("4" + ":" + lc2266.countTexts("4"));
        System.out.println("88888888888888888888888888888999999999999999999999999999994444444444444444444444444444488888888888888888888888888888555555555555555555555555555556666666666666666666666666666666666666666666666666666666666222222222222222222222222222226666666666666666666666666666699999999999999999999999999999888888888888888888888888888885555555555555555555555555555577777777777777777777777777777444444444444444444444444444444444444444444444444444444444433333333333333333333333333333555555555555555555555555555556666666666666666666666666666644444444444444444444444444444999999999999999999999999999996666666666666666666666666666655555555555555555555555555555444444444444444444444444444448888888888888888888888888888855555555555555555555555555555555555555555555555555555555555555555555555555555555555999999999999999555555555555555555555555555554444444444444444444444444444444555" + ":" + lc2266.countTexts("88888888888888888888888888888999999999999999999999999999994444444444444444444444444444488888888888888888888888888888555555555555555555555555555556666666666666666666666666666666666666666666666666666666666222222222222222222222222222226666666666666666666666666666699999999999999999999999999999888888888888888888888888888885555555555555555555555555555577777777777777777777777777777444444444444444444444444444444444444444444444444444444444433333333333333333333333333333555555555555555555555555555556666666666666666666666666666644444444444444444444444444444999999999999999999999999999996666666666666666666666666666655555555555555555555555555555444444444444444444444444444448888888888888888888888888888855555555555555555555555555555555555555555555555555555555555555555555555555555555555999999999999999555555555555555555555555555554444444444444444444444444444444555"));
    }

}
